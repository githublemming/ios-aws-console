{\rtf1\ansi\ansicpg1252\cocoartf1671\cocoasubrtf200
{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;\f1\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;\red255\green255\blue255;\red0\green0\blue0;\red211\green24\blue149;
\red35\green255\blue131;\red255\green44\blue56;\red0\green160\blue255;}
{\*\expandedcolortbl;;\csgenericrgb\c100000\c100000\c100000;\csgenericrgb\c0\c0\c0;\csgenericrgb\c82800\c9500\c58300;
\csgenericrgb\c13700\c100000\c51200;\csgenericrgb\c100000\c17100\c21900;\csgenericrgb\c0\c62600\c100000;}
\paperw12240\paperh15840\margl1440\margr1440\vieww9000\viewh8400\viewkind0
\deftab543
\pard\tx543\pardeftab543\pardirnatural\partightenfactor0

\f0\fs22 \cf2 \cb3         \cf4 let\cf2  swawsh = \cf5 SwawshCredential\cf2 .\cf5 sharedInstance
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 let\cf2  authorization = swawsh.\cf5 generateCredential\cf2 (
\f1\fs24 \cf0 \

\f0\fs22 \cf2             method: .\cf5 GET\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             path: \cf6 "/"\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             endPoint: \cf6 "ec2.amazonaws.com"\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             queryParameters: \cf6 "Action=DescribeRegions&Version=2013-10-15"\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             payloadDigest: \cf5 SwawshCredential\cf2 .\cf5 emptyStringHash\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             region: \cf6 "us-east-1"\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             service: \cf6 "ec2"\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             accessKeyId: \cf6 "accessKeyId"\cf2 ,
\f1\fs24 \cf0 \

\f0\fs22 \cf2             secretKey: \cf6 "secretAccessKey"
\f1\fs24 \cf0 \

\f0\fs22 \cf2         )
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 let\cf2  url = \cf7 URL\cf2 (string: \cf6 "https://ec2.amazonaws.com/?Action=DescribeRegions&Version=2013-10-15"\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 var\cf2  request = \cf7 URLRequest\cf2 (url: url!)
\f1\fs24 \cf0 \

\f0\fs22 \cf2         request.\cf7 httpMethod\cf2  = \cf6 "GET"
\f1\fs24 \cf0 \

\f0\fs22 \cf2         request.\cf7 addValue\cf2 (authorization!, forHTTPHeaderField: \cf6 "Authorization"\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2         request.\cf7 addValue\cf2 (swawsh.\cf5 getDate\cf2 (), forHTTPHeaderField: \cf6 "x-amz-date"\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2         request.\cf7 addValue\cf2 (\cf5 SwawshCredential\cf2 .\cf5 emptyStringHash\cf2 , forHTTPHeaderField:\cf6 "x-amz-content-sha256"\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2         request.\cf7 addValue\cf2 (\cf6 "ec2.amazonaws.com"\cf2 , forHTTPHeaderField: \cf6 "Host"\cf2 )
\f1\fs24 \cf0 \
\

\f0\fs22 \cf2         \cf4 let\cf2  session = \cf7 URLSession\cf2 .\cf7 shared
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \cf4 let\cf2  task = session.\cf7 dataTask\cf2 (with: request) \{ data, response, error \cf4 in
\f1\fs24 \cf0 \

\f0\fs22 \cf2             \cf4 let\cf2  responseString = \cf7 NSString\cf2 (data: data!, encoding: \cf7 String\cf2 .\cf7 Encoding\cf2 .\cf7 utf8\cf2 .\cf7 rawValue\cf2 )
\f1\fs24 \cf0 \

\f0\fs22 \cf2             \cf7 print\cf2 (responseString)
\f1\fs24 \cf0 \

\f0\fs22 \cf2         \}
\f1\fs24 \cf0 \

\f0\fs22 \cf2         task.\cf7 resume\cf2 ()\
\
}